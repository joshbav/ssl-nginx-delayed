{
  "apiVersion": "V2",
  "name": "ssl-nginx-delayed",
  "count": 1,
  "autoCertificate": true,
  "haproxy": {
    "frontends": [
      {
        "bindPort": 80,
        "protocol": "HTTP",
        "certificates": [
          "$AUTOCERT"
        ],
        "linkBackend": {
          "defaultBackend": "ssl-nginx-delayed-http"
        }
      },
      {
        "bindPort": 443,
        "protocol": "HTTPS",
        "certificates": [
          "$AUTOCERT"
        ],
        "linkBackend": {
          "defaultBackend": "ssl-nginx-delayed-https"
        }
      }
    ],
    "backends": [
    {
      "name": "ssl-nginx-delayed-http",
      "protocol": "HTTP",
      "services": [{
        "marathon": {
          "serviceID": "/ssl-nginx-delayed"
        },
        "endpoint": {
          "portName": "http",
          "httpchkMiscStr": ["option httpchk GET /aaaa.html HTTP/1.0"]
        },
        "httpchkMiscStr": ["option httpchk GET /aaaa.html HTTP/1.0"]
      }]
    },
    {
      "name": "ssl-nginx-delayed-https",
      "protocol": "HTTPS",
      "services": [{
        "marathon": {
          "serviceID": "/ssl-nginx-delayed"
        },
        "endpoint": {
          "portName": "https"
        }
      }]
    }]
  }
}
